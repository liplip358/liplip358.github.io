---
layout: default
title: Blog
permalink: /blog/
pagination:
  enabled: true
  per_page: 5
  permalink: /:num/
---

<!-- 
  V4 版本說明：
  1. 精選文章一致性：精選文章區塊顯示全站最新 4 篇文章（site.posts | slice: 0, 4），與第一頁一致，無論當前分頁為何。
  2. 置頂文章：顯示所有標有 "sticky" 標籤的文章，適用於所有分頁。
  3. 分頁修復：使用明確的 URL 結構（/blog/2/ 等）解決 404 錯誤。
  4. 結構清晰：所有分頁顯示相同的 Sticky 和 Featured 區塊，All Stories 顯示當前頁文章。
-->

<div class="container">
  <!-- =================================================
  Sticky 文章 (置頂)
  ================================================= -->
  {% for post in site.posts %} {% if post.tags contains "sticky" %}
  <div
    class="jumbotron jumbotron-fluid jumbotron-home pt-0 pb-0 mt-3 mb-2rem bg-lightblue position-relative"
  >
    <div class="pl-4 pr-0 h-100 tofront">
      <div class="row justify-content-between">
        <div class="col-md-6 pt-6 pb-6 pr-lg-4 align-self-center">
          <h1 class="mb-3">{{ post.title }}</h1>
          <p class="mb-3 lead">
            {{ post.excerpt | strip_html | strip_newlines | truncate: 136 }}
          </p>
          <a href="{{ post.url | relative_url }}" class="btn btn-dark"
            >Read More</a
          >
        </div>
        <div
          class="col-md-6 d-none d-md-block pr-0"
          style="background-size:cover;background-image:url('{{ post.image | relative_url }}');"
        ></div>
      </div>
    </div>
  </div>
  {% endif %} {% endfor %}

  <!-- =================================================
  精選文章 (顯示 important 最新 4 篇，與第一頁一致)
  ================================================= -->
  {% comment %} 精選文章區 (只顯示 important: true 的文章，最多 4 篇) {%
  endcomment %} {% assign featured_posts = site.posts | where: "important", true
  | slice: 0, 4 %} {% if featured_posts.size > 0 %}
  <div class="row remove-site-content-margin">
    <!-- 第一篇 (大圖) -->
    {% assign latest_post = featured_posts[0] %}
    <div class="col-md-6">
      <div class="card border-0 mb-4 box-shadow featured-card">
        <a href="{{ latest_post.url | relative_url }}">
          {% if latest_post.image %}
          <img
            class="w-100"
            src="{{ latest_post.image | relative_url }}"
            alt="{{ latest_post.title }}"
            loading="lazy"
          />
          {% endif %}
        </a>
        <div class="card-body px-0 pb-0 d-flex flex-column align-items-start">
          <h2 class="h4 font-weight-bold">
            <a href="{{ latest_post.url | relative_url }}" class="text-dark">
              {{ latest_post.title }}
            </a>
          </h2>
          <p class="excerpt">
            {{ latest_post.excerpt | strip_html | strip_newlines | truncate: 136
            }}
          </p>
          <div>
            <small class="d-block text-muted">
              In
              <span class="catlist">
                {% for category in latest_post.categories %}
                <a
                  class="text-capitalize text-muted smoothscroll"
                  href="{{ '/blog/categories.html' | relative_url }}#{{ category | downcase }}"
                  >{{ category }}</a
                >{% unless forloop.last %}, {% endunless %} {% endfor %}
              </span>
            </small>
            <small class="text-muted"
              >{{ latest_post.date | date: '%b %d, %Y' }}</small
            >
          </div>
        </div>
      </div>
    </div>

    <!-- 第二到第四篇 (小列表) -->
    <div class="col-md-6 two-to-four">
      {% for post in featured_posts offset:1 %}
      <div class="mb-3 d-flex align-items-center featured-card">
        {% if post.image %}
        <div class="col-md-4">
          <a href="{{ post.url | relative_url }}">
            <img
              class="w-100"
              src="{{ post.image | relative_url }}"
              alt="{{ post.title }}"
              loading="lazy"
            />
          </a>
        </div>
        {% endif %}
        <div>
          <h2 class="mb-2 h6 font-weight-bold">
            <a href="{{ post.url | relative_url }}" class="text-dark"
              >{{ post.title }}</a
            >
          </h2>
          <small class="d-block text-muted">
            In
            <span class="catlist">
              {% for category in post.categories %}
              <a
                class="text-capitalize text-muted smoothscroll"
                href="{{ '/blog/categories.html' | relative_url }}#{{ category | downcase }}"
                >{{ category }}</a
              >{% unless forloop.last %}, {% endunless %} {% endfor %}
            </span>
          </small>
          <small class="text-muted">{{ post.date | date: '%b %d, %Y' }}</small>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- =================================================
  所有文章列表 (適用於所有分頁)
  ================================================= -->
  <div class="row mt-3">
    <div class="col-md-8 main-loop">
      <h4 id="all-stories" class="font-weight-bold spanborder">
        <span>All Stories</span>
      </h4>

      {% for post in paginator.posts %} {% include main-loop-card.html %} {%
      endfor %}

      <!-- 分頁 -->
      <div class="mt-5">
        {% if paginator.total_pages > 1 %}
        <ul class="pagination">
          <!-- 上一頁按鈕 -->
          {% if paginator.previous_page %}
          <li class="page-item">
            <a
              class="page-link"
              href="{{ paginator.previous_page_path | relative_url }}#all-stories"
              >&laquo; Prev</a
            >
          </li>
          {% else %}
          <li class="page-item disabled">
            <span class="prev page-link">&laquo;</span>
          </li>
          {% endif %}

          <!-- 頁碼 -->
          {% for page in (1..paginator.total_pages) %} {% if page ==
          paginator.page %}
          <li class="page-item active">
            <span class="page-link">{{ page }}</span>
          </li>
          {% else %}
          <li class="page-item">
            <a
              class="page-link"
              href="{{ site.baseurl }}/blog/{% if page == 1 %}{% else %}{{ page }}/{% endif %}#all-stories"
              >{{ page }}</a
            >
          </li>
          {% endif %} {% endfor %}

          <!-- 下一頁按鈕 -->
          {% if paginator.next_page %}
          <li class="page-item">
            <a
              class="page-link"
              href="{{ paginator.next_page_path | relative_url }}#all-stories"
              >Next &raquo;</a
            >
          </li>
          {% else %}
          <li class="page-item disabled">
            <span class="next page-link">&raquo;</span>
          </li>
          {% endif %}
        </ul>
        {% endif %}
      </div>
    </div>

    <div class="col-md-4">{% include sidebar-featured.html %}</div>
  </div>
</div>
